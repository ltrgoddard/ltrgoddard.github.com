<html>
	<head>
 		<title>Computational Prynne</title>
		<script src="https://apis.google.com/js/client.js?"></script>
	</head>
	<body onload = "login();">
		<div id="input">
			<textarea id="source" rows="25" cols="75"></textarea>
			<button id="submit" onclick="search();">Search</button>
		</div>
		<div id="output">
		</div>
		<div id="results">
		</div>
	</body>
	    		<script>

function login() {

	gapi.client.setApiKey("AIzaSyBWi6rHM4-tUAIuL3oXckjJN9V8yMXdtU8");
	gapi.client.load("books", "v1", function() { console.log("Loaded!"); });
}

function search() {

	//var URLStart = "https://www.googleapis.com/books/v1/volumes?q=";
	//var URLEnd = "&callback=handleResponse";
	var chunkSize = 5
	var counter = 0
	var source = document.getElementById("source").value.split(" ");


	while (counter + chunkSize <= 5) { //source.length) {

		var chunk = source.slice(counter,counter+chunkSize);
		var searchTerm = chunk.join(" ");
		var searchTermEncoded = "%22" + encodeURIComponent(chunk.join(" ")) + "%22";
		
		var request = gapi.client.books.volumes.list({"q": searchTerm});
		request.execute(function(resp) { console.log(resp); });
		
		//var URL = URLStart + searchTerm + URLEnd; 
		//document.getElementById("results").innerHTML = "<script src=\"" + URL + "\ \" />";	

//		function handleResponse(response) {
//			for (var i = 0; i < response.items.length; i++) {
//				var item = response.items[i];
//				// in production code, item.text should have the HTML entities escaped.
//				document.getElementById("output").innerHTML += "<br>" + item.volumeInfo.title;
//			}
//		}

		counter++;
	}
}
		</script>
</html>
