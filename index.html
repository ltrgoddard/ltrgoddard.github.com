<!DOCTYPE html> 
<html> 
	<head> 
		<title>Pearl in Modern English</title>
		<link href='http://fonts.googleapis.com/css?family=EB+Garamond' rel='stylesheet' type='text/css' />
		<link rel="stylesheet" type="text/css" href="pearl.css" />
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
		<script>
		
		$(document).ready(function(){
			
			$.get('pearl.txt', function(raw) {
				
				stripped = raw.replace(/\n\n\n/g, '\n\n');
				data = stripped.replace(/\n/g, '<br />');
				group = data.split('<br /><br />');
				caret = 0;
				$('#numeral').html(group[0]);
				$('#stanza1').html(group[1]);
				$('#stanza2').html(group[2]);
				$('#stanza3').html(group[3]);
				$('#stanza4').html(group[4]);
				$('#stanza5').html(group[5]);
					
				$(document).keydown(function(e) {
    
					switch(e.which) {

				 		case 39: // right
				 		
				 		if (caret < 135 && caret != 91) {
				 			caret = caret+7;
							$('#numeral').html(group[caret] + '(' + caret + ')');
							$('#stanza1').html(group[caret+1]);
							$('#stanza2').html(group[caret+2]);
							$('#stanza3').html(group[caret+3]);
							$('#stanza4').html(group[caret+4]);
							$('#stanza5').html(group[caret+5]);
				 		}
				 		else if (caret = 91) {
				 			caret = caret+7;
				 			$('#numeral').html(group[caret] + '(' + caret + ')');
							$('#stanza1').html(group[caret+1]);
							$('#stanza2').html(group[caret+2]);
							$('#stanza3').html(group[caret+3]);
							$('#stanza4').html(group[caret+4]);
							$('#stanza5').html(group[caret+5]);
							$('#stanza6').html(group[caret+6]);
							caret = caret+1;
				 		}
						
						break;
						
						case 37: //left
						
						if (caret > 0  && caret != 99) {
							caret = caret-7;
							$('#numeral').html(group[caret] + '(' + caret + ')');
							$('#stanza1').html(group[caret+1]);
							$('#stanza2').html(group[caret+2]);
							$('#stanza3').html(group[caret+3]);
							$('#stanza4').html(group[caret+4]);
							$('#stanza5').html(group[caret+5]);
				 		}
				 		else if (caret = 99) {
				 			caret = caret-7;
				 			$('#numeral').html(group[caret] + '(' + caret + ')');
							$('#stanza1').html(group[caret+1]);
							$('#stanza2').html(group[caret+2]);
							$('#stanza3').html(group[caret+3]);
							$('#stanza4').html(group[caret+4]);
							$('#stanza5').html(group[caret+5]);
							$('#stanza6').html(group[caret+6]);
							caret = caret-1;
				 		}
				 		
						default: return; // exit this handler for other keys
    					}
    					e.preventDefault(); // prevent the default action (scroll / move caret)
    				
				});
					
			});
			
		});
		
		</script>
	</head>
	<body>
		<div id="header"><h1>Pearl in Modern English</h1></div>
		<div id="text">
			<h2 id="numeral"></h2>
			<p id="stanza1"></p>
			<p id="stanza2"></p>
			<p id="stanza3"></p>
			<p id="stanza4"></p>
			<p id="stanza5"></p>
			<p id="stanza6"></p>
		</div>
		<div id="illustration"><img src="http://upload.wikimedia.org/wikipedia/commons/2/2e/Pearl_Poet.jpg" /></div>
	</body>
</html>
